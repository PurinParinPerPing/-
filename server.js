async function handleEvent(event) {
  console.log('Received event:', JSON.stringify(event, null, 2));
  if (event.type !== 'message' || event.message.type !== 'text') {
    return Promise.resolve(null);
  }

  const text = event.message.text.toLowerCase();

  // 0. ‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
  const greetings = ['‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ', '‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö', '‡∏î‡∏µ‡∏Ñ‡πà‡∏∞', 'hello', 'hi', 'hey', '‡∏ó‡∏±‡∏Å', '‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°'];
  if (greetings.some(g => text.includes(g))) {
    const displayName = event.source?.userId
      ? await getUserDisplayName(event.source.userId)
      : '‡∏Ñ‡πà‡∏∞'; // fallback
    return replyText(event.replyToken, `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì${displayName} üòä ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡∏ô‡∏∞‡∏Ñ‡∏∞`);
  }

  // 1. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
  const priceCalcResult = calculatePrice(text);
  if (priceCalcResult) {
    return replyText(event.replyToken, priceCalcResult + '\n‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞');
  }

  // 2. ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á
  const extraQuestions = [
    {
      keywords: ['‡πÄ‡∏™‡∏µ‡∏¢‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏´‡∏°', '‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏´‡∏°', '‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏´‡∏°', '‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏´‡∏°', '‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°', '‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏´‡∏°', '‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°'],
      reply: '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡πà‡∏∞'
    },
    {
      keywords: ['‡πÇ‡∏õ‡∏£‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ñ‡∏∂‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà', '‡πÇ‡∏õ‡∏£‡∏´‡∏°‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà', '‡πÇ‡∏õ‡∏£‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà', '‡πÇ‡∏õ‡∏£‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà', '‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏´‡∏°‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà'],
      reply: '‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Ñ‡πà‡∏∞'
    },
    {
      keywords: ['‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°', '‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô‡πÑ‡∏´‡∏°', '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô', '‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô', '‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ó‡∏≥‡πÑ‡∏´‡∏°'],
      reply: '‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏¢‡∏≤‡∏°‡∏ä‡∏±‡∏¢‡∏´‡∏≤‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Ç‡∏≤‡∏ß‡∏Ñ‡πà‡∏∞'
    },
    {
      keywords: ['‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏´‡∏°', '‡∏°‡∏µ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏´‡∏°', '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏´‡∏°', '‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÑ‡∏´‡∏°', '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏´‡∏°'],
      reply: '‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡πà‡∏∞'
    },
    {
      keywords: ['‡∏à‡∏∏‡∏î‡∏õ‡∏ê‡∏°‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•', '‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏õ‡∏ê‡∏°‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡πÑ‡∏´‡∏°', '‡∏õ‡∏ê‡∏°‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•', '‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏õ‡∏ê‡∏°‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•', '‡∏ó‡∏µ‡πà‡∏õ‡∏ê‡∏°‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•'],
      reply: '‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏õ‡∏ê‡∏°‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞'
    }
  ];
  for (const q of extraQuestions) {
    if (q.keywords.some(k => text.includes(k))) {
      return replyText(event.replyToken, q.reply);
    }
  }

  // 3. ‡∏à‡∏≠‡∏á/‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
  const bookingKeywords = ['‡∏ã‡∏∑‡πâ‡∏≠', '‡∏à‡∏≠‡∏á', '‡∏ã‡∏∑‡πâ‡∏≠‡∏ï‡∏±‡πã‡∏ß', '‡∏à‡∏≠‡∏á‡∏ï‡∏±‡πã‡∏ß', '‡∏à‡∏≠‡∏á‡∏ö‡∏±‡∏ï‡∏£', '‡∏ã‡∏∑‡πâ‡∏≠‡∏ï‡∏±‡πã‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤'];
  if (bookingKeywords.some(k => text.includes(k))) {
    return replyText(event.replyToken, '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ã‡∏∑‡πâ‡∏≠‡∏ö‡∏±‡∏ï‡∏£‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏≤‡∏á LINE ‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏î‡πá‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ñ‡πà‡∏∞');
  }

  if (text.includes('‡∏ä‡∏≥‡∏£‡∏∞') || text.includes('‡∏à‡πà‡∏≤‡∏¢') || text.includes('‡πÇ‡∏≠‡∏ô')) {
    return client.replyMessage(event.replyToken, {
      type: 'image',
      originalContentUrl: 'https://cdn.glitch.global/.../‡∏™‡∏•‡∏¥‡∏õ‡πÄ‡∏à‡πâ‡∏≤.jfif',
      previewImageUrl: 'https://cdn.glitch.global/.../‡∏™‡∏•‡∏¥‡∏õ‡πÄ‡∏à‡πâ‡∏≤.jfif'
    });
  }

  // 4. ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà / ‡πÄ‡∏ß‡∏•‡∏≤ / ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
  const checks = [
    {
      keywords: ['‡πÄ‡∏õ‡∏¥‡∏î', '‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£', '‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á'],
      reply: '‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏ß‡∏•‡∏≤ 08.00 - 00.00 ‡∏ô. ‡∏Ñ‡πà‡∏∞'
    },
    {
      keywords: ['‡∏à‡∏≠‡∏î‡∏£‡∏ñ', '‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ', '‡∏•‡∏≤‡∏ô‡∏à‡∏≠‡∏î‡∏£‡∏ñ'],
      reply: '‡∏ó‡∏≤‡∏á‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏ü‡∏£‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏∞'
    },
    {
      keywords: ['‡∏Ñ‡πà‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤', '‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ö‡∏±‡∏ï‡∏£', '‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢', '‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡πã‡∏ß', '‡∏Ñ‡πà‡∏≤‡∏ö‡∏±‡∏ï‡∏£', '‡∏ö‡∏±‡∏ï‡∏£‡∏£‡∏≤‡∏Ñ‡∏≤'],
      reply: '‡∏Ñ‡πà‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏¢‡∏≤‡∏°‡∏ä‡∏±‡∏¢‡∏´‡∏≤‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Ç‡∏≤‡∏ß ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà 40 ‡∏ö‡∏≤‡∏ó ‡πÄ‡∏î‡πá‡∏Å‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 10 ‡∏õ‡∏µ ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏£‡∏µ\n‡πÇ‡∏ã‡∏ô‡∏ó‡∏∞‡πÄ‡∏•‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏° ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà 120 ‡∏ö‡∏≤‡∏ó ‡πÄ‡∏î‡πá‡∏Å 60 ‡∏ö‡∏≤‡∏ó‡∏Ñ‡πà‡∏∞'
    },
    {
      keywords: ['‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô', '‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô', '‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏¢‡∏π‡πà', '‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà'],
      reply: '‡∏™‡∏¢‡∏≤‡∏°‡∏ä‡∏±‡∏¢‡∏´‡∏≤‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Ç‡∏≤‡∏ß‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏° ‡∏î‡∏π‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà: https://g.co/kgs/k1Zv8V2'
    },
    {
      keywords: ['‡πÄ‡∏•‡πà‡∏ô‡∏ô‡πâ‡∏≥', '‡∏ô‡πâ‡∏≥', '‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥'],
      reply: '‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡∏ô‡πâ‡∏≥‡πÑ‡∏î‡πâ‡∏ñ‡∏∂‡∏á 18.00 ‡∏ô. ‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏´‡∏•‡∏±‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏≤‡∏°‡∏ä‡∏±‡∏¢‡πÑ‡∏î‡πâ‡∏ñ‡∏∂‡∏á 21.00 ‡∏ô.'
    },
    {
      keywords: ['‡∏≠‡∏≤‡∏´‡∏≤‡∏£', '‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£', '‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏ô', '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°', '‡∏Å‡∏¥‡∏ô‡∏≠‡∏∞‡πÑ‡∏£', '‡∏Ç‡∏≤‡∏¢‡∏≠‡∏≤‡∏´‡∏≤‡∏£'],
      reply: '‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÑ‡∏î‡πâ ‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏ã‡∏∂‡πà‡∏á‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏Ñ‡πà‡∏∞ ‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏°‡∏µ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏∞'
    },
    {
      keywords: ['‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤', '‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á', '‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢', '‡∏°‡∏µ‡∏£‡πâ‡∏≤‡∏ô‡πÑ‡∏´‡∏°'],
      reply: '‡∏°‡∏µ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏ö‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏´‡∏≤‡∏î‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞ ‡∏ó‡∏±‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏ô ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô ‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏∞'
    },
    {
      keywords: ['‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ï', '‡∏î‡∏ô‡∏ï‡∏£‡∏µ', '‡πÇ‡∏ä‡∏ß‡πå', '‡πÅ‡∏™‡∏î‡∏á'],
      reply: '‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ï‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà Facebook ‡πÄ‡∏û‡∏à "‡∏™‡∏¢‡∏≤‡∏°‡∏ä‡∏±‡∏¢‡∏´‡∏≤‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Ç‡∏≤‡∏ß" ‡∏Ñ‡πà‡∏∞'
    },
    {
      keywords: ['‡∏™‡∏±‡∏ï‡∏ß‡πå', '‡∏´‡∏°‡∏≤', '‡πÅ‡∏°‡∏ß', '‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á'],
      reply: '‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÑ‡∏î‡πâ ‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà ‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏•‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ô‡πâ‡∏≥‡∏ô‡∏∞‡∏Ñ‡∏∞'
    },
    {
      keywords: ['‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà', '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î', '‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß'],
      reply: '‡∏™‡∏¢‡∏≤‡∏°‡∏ä‡∏±‡∏¢‡∏´‡∏≤‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Ç‡∏≤‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡∏´‡∏¢‡πà‡∏≠‡∏ô‡πÉ‡∏à ‡∏°‡∏µ‡πÇ‡∏ã‡∏ô‡πÄ‡∏•‡πà‡∏ô‡∏ô‡πâ‡∏≥ ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡πÅ‡∏•‡∏∞‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡πÉ‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°‡∏Ñ‡πà‡∏∞'
    },
    {
      keywords: ['‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å', '‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å', '‡∏û‡∏±‡∏Å', '‡∏ô‡∏≠‡∏ô'],
      reply: '‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡πà‡∏∞ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô'
    }
  ];
  for (const item of checks) {
    if (item.keywords.some(k => text.includes(k))) {
      return replyText(event.replyToken, item.reply);
    }
  }

  // 5. fallback
  return replyText(event.replyToken, '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡πà‡∏∞ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞');
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏° helper ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
async function getUserDisplayName(userId) {
  try {
    const profile = await client.getProfile(userId);
    return profile.displayName || '';
  } catch (error) {
    console.error('Error getting user profile:', error);
    return '';
  }
}
